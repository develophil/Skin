function blogSearch(a){$("body,html").animate({scrollTop:"0"});$("#search-resultWrap").addClass("opened appearing");$("#search-result").html("");$("#search-result").load(location.origin+"/search/"+encodeURI(a)+" #searchList",function(){$("#search-result").append('<div class="moreResult flatbutton"><a href="'+location.origin+"/search/"+encodeURI(a)+'">검색결과 전체 보기</a></div>');$("#search-resultWrap").css("height",($("#search-result").height()+70)+"px");$("#search-result .getThumb a").each(function(b,c){insertThumb(c)})})}function closeBlogSearch(){$("#search-resultWrap").removeClass("opened appearing");$("#search-result").html("")}function desktopMode(){if(isMobile=="mobile"||isMobile=="tablet"){if(desktopModeSwitch=="on"){sessionStorage.desktopModeSwitch="off";location.reload()}else{alert("페이지 하단의 버튼을 누르면 원래대로 돌아옵니다.");window.scrollTo(0,0);sessionStorage.desktopModeSwitch="on";location.reload()}}else{alert("모바일 환경에서만 동작합니다.")}}function thumbSizing(a,b){var c=a.replace("image",b);c=c.replace("original",b);return c}function thumbAjax(a){return $.ajax({url:a})}var thumbList=[];function insertThumb(e){var a,d;var c=$(e).prop("href").split("#")[0];c=c.replace("http://","");if(c.split("/")[2]!==undefined){c="/"+c.split("/")[1]+"/"+c.split("/")[2]}else{c="/"+c.split("/")[1]}for(var b=0;b<thumbList.length;++b){if(c==decodeURIComponent(thumbList[b].link)){a=thumbList[b].thumb}}if(a===undefined){d=thumbAjax(c);d.success(function(g){if(g.match('<meta property="og:image" content="(.*?)"')){a=g.match('<meta property="og:image" content="(.*?)"')[0];a=a.substring(35,a.length-1);a=thumbSizing(a,"C60x60");$(e).prepend("<img src='"+a+"' alt='thumbnail' class='thumb' onerror='this.src=\"/favicon.ico\"'/>");var f={};f.link=c;f.thumb=a;thumbList.push(f)}else{$(e).prepend("<img src='/favicon.ico' alt='thumbnail' class='thumb'/>")}})}else{a=thumbSizing(a,"C60x60");$(e).prepend("<img src='"+a+"' alt='thumbnail' class='thumb' onerror='this.src=\"/favicon.ico\"'/>")}}function initGetThumb(){$.ajax({url:"/rss",dataType:"xml",success:function(a){$(a).find("item").each(function(){var d={};var c,b,e;c=$(this).children("link").text();c=c.replace("http://","");if(c.split("/")[2]!==undefined){c="/"+c.split("/")[1]+"/"+c.split("/")[2]}else{c="/"+c.split("/")[1]}e=$(this).children("description").text();if(e.match('http://cfile(.*?)"')!==null){b=e.match('http://cfile(.*?)"')[0];b=b.substring(0,b.length-1)}else{b=""}e=e.replace(/(<([^>]+)>)/ig,"");d.link=c;d.thumb=b;thumbList.push(d)});$(".getThumb a").each(function(b,c){insertThumb(c)})},error:function(){console.log("RSS loading fail.")}})}initGetThumb();$(document).ready(function(){$("header #search-box>input").blur(function(){$("header #search-box").removeClass("opened")});$("header a.search-icon").click(function(){$("header #search-box").addClass("opened");$("header #search-box>input").focus()});$("#search-result-close").click(function(){closeBlogSearch()});var m=$("aside>.sidebar-temp>div,aside>.sidebar-temp>section");var f=$("aside>#sidebar-col1");var e=$("aside>#sidebar-col2");var i=2;if($("html").outerWidth()<768){i=1}function c(){$("aside .appearing").removeClass("appearing");for(var d=0;d<=m.length;d++){$("aside .sidebar-temp").append(m[d])}j=0;var o=setInterval(function(){if(i==2){if(f.height()<=e.height()){f.append(m[j])}else{e.append(m[j])}}else{f.append(m[j])}j++;if(j==m.length){clearInterval(o)}},150)}$(window).resize(function(){var d=i;if($("html").outerWidth()<768){i=1}else{i=2}if(d!==i){c()}});function a(){if(($(window).scrollTop()+$(window).innerHeight()+100)>$("aside").offset().top){if(n===0){c();n++}}}var n=0;a();$(window).scroll(function(){a();$(".homeBG").css("background-position-y",($(window).scrollTop()*0.5));if($(window).scrollTop()===0){$("#toTop").hide()}else{$("#toTop").show()}});if(navigator.userAgent.match(/Mobile|iP(hone|od)|BlackBerry|IEMobile|Kindle|NetFront|Silk-Accelerated|(hpw|web)OS|Fennec|Minimo|Opera M(obi|ini)|Blazer|Dolfin|Dolphin|Skyfire|Zune/)){isMobile="mobile"}else{if(navigator.userAgent.match(/Android|iPad/)){isMobile="tablet"}else{isMobile="notMobile"}}if(desktopModeSwitch=="on"&&(isMobile=="mobile"||isMobile=="tablet")){$("body").append('<button onclick="desktopMode()" style="width:100%;font-size: 3em;color:#999;padding:2em;border: gray solid .3em;">모바일 화면으로 돌아가기</button>')}$(".tab_content").hide();$(".tab_content").each(function(d,o){$(o).parent().children().first().show()});$(".tabs li").click(function(){var d=$(this).attr("rel");$(this).parent().find("li").removeClass("active");$(this).addClass("active");$(this).parent().parent().find(".tab_content").hide();$(this).parent().parent().find("."+d).fadeIn()});var l,b,g,k,h;ink_id_arr=[];if(navigator.userAgent.match(/Firefox/)){return false}else{$(".ripplelink").mousedown(function(d){b="ink"+Math.round(Math.random()*1000);ink_id_arr.push(b);$(this).prepend("<span class='ink "+b+"'></span>");l=$(this).find("."+b);if(!l.height()&&!l.width()){g=Math.max($(this).outerWidth(),$(this).outerHeight());l.css({height:g,width:g})}k=d.pageX-$(this).offset().left-l.width()/2;h=d.pageY-$(this).offset().top-l.height()/2;l.css({top:h+"px",left:k+"px"}).addClass("animate");window.setTimeout(function(){$("."+ink_id_arr[0]).remove();ink_id_arr.shift()},900)})}});